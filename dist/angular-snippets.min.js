/*!
 *  angular-snippets
 *  Version   : 2.0.1
 *  Date      : 2017-02-31
 *  Author    : DEMONTE Jean-Baptiste
 *  Contact   : jbdemonte@gmail.com
 *  Licence   : GPL v3 : http://www.gnu.org/licenses/gpl.html
 */
!function(t){t.module("Snippets",[]).provider("snippets",function(){var n={content:{before:[],after:[]},options:{manifest:"manifest.json",snippets:{template:""},highlight:function(n){t.forEach(n.find("pre"),function(t){Prism.highlightElement(t)})},type:function(t){var n={js:"javascript",html:"markup",svg:"markup",xml:"markup",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell"};return n[t]||t}}};this.configure=function(e){t.extend(n.options,e)},this.content={before:function(t){n.content.before.push(t)},after:function(t){n.content.after.push(t)}},this.$get=function(){return n}}).directive("snippetsContentBefore",["$compile","snippets",function(t,n){return{restrict:"E",require:"^snippets",link:function(e,i,o,r){n.content.before.length&&!r.contentBeforeDisabled()&&(i.html(n.content.before.join("")),t(i.contents())(e))}}}]).directive("snippetsContentAfter",["$compile","snippets",function(t,n){return{restrict:"E",link:function(e,i,o){n.content.after.length&&(i.html(n.content.after.join("")),t(i.contents())(e))}}}]).directive("snippets",["$q","$http","$templateRequest","$timeout","$parse","snippets",function(n,e,i,o,r,s){return t.extend({restrict:"E",scope:{path:"=path",files:"=files"},transclude:!0,controller:["$scope","$element","$attrs",function(r,c,p){var f=r.files,a=0,u=[],l=r.path?r.path.replace(/\/+$/,"")+"/":"";this.contentBeforeDisabled=function(){return"contentBeforeDisabled"in p},this.contentAfterDisabled=function(){return"contentAfterDisabled"in p},r.current={},r.done=!1,n(function(t,n){f&&f.length?t(f):e.get(l+s.options.manifest).then(function(n){n.data&&n.data.files&&n.data.files.length&&t(n.data.files)},n)}).then(function(n){t.forEach(n,function(t){var e={name:t,type:s.options.type(t.replace(/^.*\./,"").toLowerCase())};u.push(e),i(l+t,!0).then(function(t){e.content=t},function(){e.error=!0}).finally(function(){a++,a===n.length&&(r.items=u,r.path=l,r.done=!0,o(function(){s.options.highlight(c)},0,!1))})})},function(t){})}]},s.options.snippets)}])}(angular);
