/*!
 *  angular-snippets
 *  Version   : 2.0.0
 *  Date      : 2015-06-30
 *  Author    : DEMONTE Jean-Baptiste
 *  Contact   : jbdemonte@gmail.com
 *  Licence   : GPL v3 : http://www.gnu.org/licenses/gpl.html
 */
!function(t){t.module("Snippets",[]).provider("snippets",function(){var e={content:{before:[],after:[]},options:{manifest:"manifest.json",snippets:{template:""},highlight:function(e){t.forEach(e.find("pre"),function(t){Prism.highlightElement(t)})},type:function(t){var e={js:"javascript",html:"markup",svg:"markup",xml:"markup",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell"};return e[t]||t}}};this.configure=function(n){t.extend(e.options,n)},this.content={before:function(t){e.content.before.push(t)},after:function(t){e.content.after.push(t)}},this.$get=function(){return e}}).directive("snippetsContentBefore",["$compile","snippets",function(t,e){return{restrict:"E",require:"^snippets",link:function(n,i,o,r){e.content.before.length&&!r.contentBeforeDisabled()&&(i.html(e.content.before.join("")),t(i.contents())(n))}}}]).directive("snippetsContentAfter",["$compile","snippets",function(t,e){return{restrict:"E",link:function(n,i,o){e.content.after.length&&(i.html(e.content.after.join("")),t(i.contents())(n))}}}]).directive("snippets",["$q","$http","$templateRequest","$timeout","$parse","snippets",function(e,n,i,o,r,s){return t.extend({restrict:"E",scope:{path:"=path",files:"=files"},transclude:!0,controller:["$scope","$element","$attrs",function(r,p,c){var f=r.files,a=0,u=[],l=r.path?r.path.replace(/\/+$/,"")+"/":"";this.contentBeforeDisabled=function(){return"contentBeforeDisabled"in c},this.contentAfterDisabled=function(){return"contentAfterDisabled"in c},r.current={},r.done=!1,e(function(t,e){f&&f.length?t(f):n.get(l+s.options.manifest).then(function(e){e.data&&e.data.files&&e.data.files.length&&t(e.data.files)},e)}).then(function(e){t.forEach(e,function(t){var n={name:t,type:s.options.type(t.replace(/^.*\./,"").toLowerCase())};u.push(n),i(l+t,!0).then(function(t){n.content=t},function(){n.error=!0})["finally"](function(){a++,a===e.length&&(r.items=u,r.path=l,r.done=!0,o(function(){s.options.highlight(p)},0,!1))})})})}]},s.options.snippets)}])}(angular);
